import{_ as _e,r as i,q as pe,s as ce,i as o,o as d,j as k,k as l,m as x,l as t,e as u,a as r,c as C,f as L,F as Q,x as me,t as p,d as q}from"./app-dea674a6.js";const fe={__name:"ShippingPackages",setup(ge){const T=i([]),b=i(null),y=i(!1),I=i(!1),O=i([]),c=i(!1),m=i(""),S=i(!1),V=i(!1),v=i(null),z=i(""),R=[{title:"Pending",value:"pending"},{title:"Ready",value:"ready"},{title:"Shipped",value:"shipped"}],f=i({items:[{gtin:null,quantity:1,condition:"new"}],notes:""}),G=s=>{switch(s){case"pending":return"warning";case"ready":return"info";case"shipped":return"success";default:return"grey"}},w=async()=>{var s,e;try{const n=await x.get("/api/shipping-packages",{params:{status:b.value}});T.value=n.data.data}catch(n){console.error("Error loading packages:",n),m.value=((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||"Error loading shipping packages",c.value=!0}},W=async()=>{var s,e;try{const n=await x.get("/api/product");O.value=n.data.data}catch(n){console.error("Error loading products:",n),m.value=((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||"Error loading products",c.value=!0}},H=async()=>{var s,e,n,_;try{I.value=!0,await x.post("/api/shipping-packages",f.value),y.value=!1,w(),f.value={items:[{gtin:null,quantity:1,condition:"new"}],notes:""}}catch(g){console.error("Error creating package:",g),m.value=((e=(s=g.response)==null?void 0:s.data)==null?void 0:e.message)||((_=(n=g.response)==null?void 0:n.data)==null?void 0:_.error)||"Error creating shipping package",c.value=!0}finally{I.value=!1}},X=()=>{f.value.items.push({gtin:null,quantity:1,condition:"new"})},Y=s=>{v.value=s,S.value=!0},Z=async s=>{v.value=s,V.value=!0},h=async s=>{var e,n;try{await x.post(`/api/shipping-packages/${s.id}/return`),await w()}catch(_){m.value=((n=(e=_.response)==null?void 0:e.data)==null?void 0:n.message)||"Error returning items to inventory",c.value=!0}},ee=async()=>{var s,e;try{await x.patch(`/api/shipping-packages/${v.value.id}/status`,{status:z.value}),V.value=!1,await w()}catch(n){m.value=((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||"Error updating status",c.value=!0}};return pe(b,()=>{w()}),ce(()=>{w(),W()}),(s,e)=>{const n=o("v-btn"),_=o("v-card-title"),g=o("v-select"),J=o("v-chip"),N=o("v-icon"),te=o("v-btn-group"),le=o("v-table"),P=o("v-card-text"),U=o("v-card"),ae=o("v-autocomplete"),K=o("v-col"),ne=o("v-text-field"),oe=o("v-row"),ue=o("v-textarea"),se=o("v-form"),B=o("v-spacer"),F=o("v-card-actions"),M=o("v-dialog"),E=o("v-list-item-title"),j=o("v-list-item-subtitle"),$=o("v-list-item"),re=o("v-divider"),ie=o("v-list"),de=o("v-snackbar"),ve=o("v-container");return d(),k(ve,{fluid:""},{default:l(()=>[t(U,{class:"card z-index-2 h-100"},{default:l(()=>[t(_,{class:"d-flex justify-space-between align-center"},{default:l(()=>[t(n,{class:"btn-primary",onClick:e[0]||(e[0]=a=>y.value=!0)},{default:l(()=>e[12]||(e[12]=[u(" Create Package ")])),_:1,__:[12]})]),_:1}),t(P,null,{default:l(()=>[t(g,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),items:R,label:"Filter by Status",clearable:""},null,8,["modelValue"]),t(le,null,{default:l(()=>[e[16]||(e[16]=r("thead",null,[r("tr",null,[r("th",null,"Package ID"),r("th",null,"Status"),r("th",null,"Items"),r("th",null,"Created"),r("th",null,"Actions")])],-1)),r("tbody",null,[(d(!0),C(Q,null,L(T.value,a=>(d(),C("tr",{key:a.id},[r("td",null,p(a.package_id),1),r("td",null,[t(J,{color:G(a.status),size:"small"},{default:l(()=>[u(p(a.status),1)]),_:2},1032,["color"])]),r("td",null,p(a.items.length)+" items",1),r("td",null,p(new Date(a.created_at).toLocaleDateString()),1),r("td",null,[t(te,null,{default:l(()=>[t(n,{size:"small",icon:"",onClick:D=>Y(a)},{default:l(()=>[t(N,{class:"text-primary"},{default:l(()=>e[13]||(e[13]=[u("fa-eye")])),_:1,__:[13]})]),_:2},1032,["onClick"]),a.status!=="shipped"?(d(),k(n,{key:0,size:"small",icon:"",onClick:D=>Z(a)},{default:l(()=>[t(N,{class:"text-info"},{default:l(()=>e[14]||(e[14]=[u("fa-pencil")])),_:1,__:[14]})]),_:2},1032,["onClick"])):q("",!0),a.status==="pending"?(d(),k(n,{key:1,size:"small",icon:"",onClick:D=>h(a)},{default:l(()=>[t(N,{class:"text-danger"},{default:l(()=>e[15]||(e[15]=[u("fa-undo")])),_:1,__:[15]})]),_:2},1032,["onClick"])):q("",!0)]),_:2},1024)])]))),128))])]),_:1,__:[16]})]),_:1})]),_:1}),t(M,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=a=>y.value=a),"max-width":"800px"},{default:l(()=>[t(U,null,{default:l(()=>[t(_,null,{default:l(()=>e[17]||(e[17]=[u("Create Shipping Package")])),_:1,__:[17]}),t(P,null,{default:l(()=>[t(se,{onSubmit:me(H,["prevent"])},{default:l(()=>[(d(!0),C(Q,null,L(f.value.items,(a,D)=>(d(),C("div",{key:D},[t(oe,null,{default:l(()=>[t(K,{cols:"6"},{default:l(()=>[t(ae,{modelValue:a.gtin,"onUpdate:modelValue":A=>a.gtin=A,items:O.value,"item-title":"title","item-value":"gtin",label:"Product"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(K,{cols:"3"},{default:l(()=>[t(ne,{modelValue:a.quantity,"onUpdate:modelValue":A=>a.quantity=A,type:"number",label:"Quantity",min:"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128)),t(n,{text:"",onClick:X},{default:l(()=>e[18]||(e[18]=[u(" Add Item ")])),_:1,__:[18]}),t(ue,{modelValue:f.value.notes,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value.notes=a),label:"Notes",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),t(F,null,{default:l(()=>[t(B),t(n,{text:"",onClick:e[3]||(e[3]=a=>y.value=!1)},{default:l(()=>e[19]||(e[19]=[u(" Cancel ")])),_:1,__:[19]}),t(n,{color:"primary",onClick:H,loading:I.value},{default:l(()=>e[20]||(e[20]=[u(" Create ")])),_:1,__:[20]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(M,{modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=a=>S.value=a),"max-width":"800px"},{default:l(()=>[v.value?(d(),k(U,{key:0},{default:l(()=>[t(_,null,{default:l(()=>e[21]||(e[21]=[u("Package Details")])),_:1,__:[21]}),t(P,null,{default:l(()=>[t(ie,null,{default:l(()=>[t($,null,{default:l(()=>[t(E,null,{default:l(()=>e[22]||(e[22]=[u("Package ID")])),_:1,__:[22]}),t(j,null,{default:l(()=>[u(p(v.value.package_id),1)]),_:1})]),_:1}),t($,null,{default:l(()=>[t(E,null,{default:l(()=>e[23]||(e[23]=[u("Status")])),_:1,__:[23]}),t(j,null,{default:l(()=>[t(J,{color:G(v.value.status),size:"small"},{default:l(()=>[u(p(v.value.status),1)]),_:1},8,["color"])]),_:1})]),_:1}),t($,null,{default:l(()=>[t(E,null,{default:l(()=>e[24]||(e[24]=[u("Items")])),_:1,__:[24]})]),_:1}),t(re),(d(!0),C(Q,null,L(v.value.items,a=>(d(),k($,{key:a.id},{default:l(()=>[t(E,null,{default:l(()=>[u(p(a.product.title),1)]),_:2},1024),t(j,null,{default:l(()=>[u("Quantity: "+p(a.quantity),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(F,null,{default:l(()=>[t(B),t(n,{text:"",onClick:e[5]||(e[5]=a=>S.value=!1)},{default:l(()=>e[25]||(e[25]=[u("Close")])),_:1,__:[25]})]),_:1})]),_:1})):q("",!0)]),_:1},8,["modelValue"]),t(M,{modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=a=>V.value=a),"max-width":"400px"},{default:l(()=>[v.value?(d(),k(U,{key:0},{default:l(()=>[t(_,null,{default:l(()=>e[26]||(e[26]=[u("Update Status")])),_:1,__:[26]}),t(P,null,{default:l(()=>[t(g,{modelValue:z.value,"onUpdate:modelValue":e[7]||(e[7]=a=>z.value=a),items:R,label:"New Status","item-title":"title","item-value":"value"},null,8,["modelValue"])]),_:1}),t(F,null,{default:l(()=>[t(B),t(n,{text:"",onClick:e[8]||(e[8]=a=>V.value=!1)},{default:l(()=>e[27]||(e[27]=[u("Cancel")])),_:1,__:[27]}),t(n,{color:"primary",onClick:ee},{default:l(()=>e[28]||(e[28]=[u("Update")])),_:1,__:[28]})]),_:1})]),_:1})):q("",!0)]),_:1},8,["modelValue"]),t(de,{modelValue:c.value,"onUpdate:modelValue":e[11]||(e[11]=a=>c.value=a),color:"error",timeout:"5000",location:"top"},{actions:l(()=>[t(n,{color:"white",variant:"text",onClick:e[10]||(e[10]=a=>c.value=!1)},{default:l(()=>e[29]||(e[29]=[u(" Close ")])),_:1,__:[29]})]),default:l(()=>[u(p(m.value)+" ",1)]),_:1},8,["modelValue"])]),_:1})}}},ye=_e(fe,[["__file","ShippingPackages.vue"]]);export{ye as default};
