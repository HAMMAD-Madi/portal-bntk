import{_ as D,r as p,i as l,o as _,j as f,k as t,l as s,e as m,x as E,d as b,a as n,c as U,f as P,F as T,t as g,m as R}from"./app-be4f7d6f.js";const z={__name:"BatchUpload",setup(I){const c=p(null),y=p(""),v=p(!1),d=p([]),a=p({show:!1,type:"info",message:""}),h=async()=>{if(!c.value){y.value="Please select a file";return}try{v.value=!0,a.value.show=!0,a.value.type="info",a.value.message="Processing file...";const i=c.value;d.value=[];const e=new FormData;e.append("file",i),console.log("formData:",e),a.value.message="Uploading products...";const o=await R.post("/api/products/batch-upload",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Res :",o),o.data.success?(a.value.type="success",a.value.message=o.data.message,c.value=null):(a.value.type="error",a.value.message=o.data.message||"Upload failed"),o.data.results&&(d.value=o.data.results.map(u=>({gtin:u.gtin,title:u.title,success:u.success,message:u.message||(u.success?"Success":"Failed")})))}catch(i){console.error("File upload error:",i),d.value=[{gtin:"Error",title:"File Upload Failed",success:!1,message:i.message||"Upload failed"}]}finally{v.value=!1}};return(i,e)=>{const o=l("v-card-title"),u=l("v-icon"),w=l("v-file-input"),F=l("v-alert"),k=l("v-btn"),B=l("v-form"),N=l("v-chip"),V=l("v-table"),x=l("v-card"),S=l("v-card-text"),C=l("v-container");return _(),f(C,{fluid:""},{default:t(()=>[s(x,{class:"card z-index-2 h-100"},{default:t(()=>[s(o,null,{default:t(()=>e[1]||(e[1]=[m("Nieuwe producten in batches uploaden")])),_:1,__:[1]}),s(S,null,{default:t(()=>[s(B,{onSubmit:E(h,["prevent"])},{default:t(()=>[s(w,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),accept:".csv, .xlsx",label:"Upload Product File","prepend-icon":"","error-messages":y.value,"show-size":""},{"prepend-inner":t(()=>[s(u,{class:"mr-3"},{default:t(()=>e[2]||(e[2]=[m("fa-file-upload")])),_:1,__:[2]})]),_:1},8,["modelValue","error-messages"]),a.value.show?(_(),f(F,{key:0,type:a.value.type,text:a.value.message},null,8,["type","text"])):b("",!0),s(k,{class:"btn-primary mt-4",type:"submit",loading:v.value,disabled:!c.value},{default:t(()=>e[3]||(e[3]=[m(" Upload Products ")])),_:1,__:[3]},8,["loading","disabled"])]),_:1}),d.value.length?(_(),f(x,{key:0,class:"mt-4"},{default:t(()=>[s(o,null,{default:t(()=>e[4]||(e[4]=[m("Upload Results")])),_:1,__:[4]}),s(V,null,{default:t(()=>[e[5]||(e[5]=n("thead",null,[n("tr",null,[n("th",null,"GTIN/EAN"),n("th",null,"Title"),n("th",null,"Status")])],-1)),n("tbody",null,[(_(!0),U(T,null,P(d.value,r=>(_(),U("tr",{key:r.gtin},[n("td",null,g(r.gtin),1),n("td",null,g(r.title),1),n("td",null,[s(N,{color:r.success?"success":"error","text-color":"white"},{default:t(()=>[m(g(r.message),1)]),_:2},1032,["color"])])]))),128))])]),_:1,__:[5]})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})}}},A=D(z,[["__file","BatchUpload.vue"]]);export{A as default};
