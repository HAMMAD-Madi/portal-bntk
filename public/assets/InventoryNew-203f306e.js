import{_ as ue,r as g,m as b,s as ie,i as n,o as q,j as B,k as i,l as o,x as me,y as e,d as K,e as $,t as de}from"./app-be4f7d6f.js";import{c as ve,a as u,b as L,d as z,e as X,f as H,u as ce,g as t}from"./index.esm-8cf0b85b.js";const ge={__name:"InventoryNew",setup(pe){const p=g(!1),f=g(""),y=g("success"),k=g(!1),J=ve({title:u().required(),item_no:u().required(),item_type:u().required().oneOf(["MINIFIG","PART","SET","BOOK","GEAR","CATALOG","INSTRUCTION","UNSORTED_LOT","ORIGINAL_BOX"]),color_id:L().nullable(),stock:L().required().positive().integer(),price:u().required(),condition:u().required().oneOf(["new","used"]),completeness:u().when("item_type",{is:"SET",then:s=>s.required(),otherwise:s=>s.notRequired()}),category_ids:z().of(L().required()).min(1,"Select at least one category"),gtin:u().nullable(),sku:u().nullable(),retain:X().nullable(),is_stock_room:X().nullable(),stock_room_id:u().nullable().when("is_stock_room",{is:!0,then:s=>s.nullable().oneOf(["A","B","C"]),otherwise:s=>s.nullable()}),imageurl:u().nullable(),main_image:H().nullable(),gallery_images:z().of(H()).nullable()}),{handleSubmit:Q}=ce({validationSchema:J}),I=t("title"),U=t("item_no"),_=t("item_type"),S=t("color_id"),T=t("stock"),N=t("price"),O=t("condition"),w=t("completeness"),M=t("category_ids"),V=t("gtin"),C=t("sku"),D=t("retain"),R=t("is_stock_room"),x=t("stock_room_id"),A=t("imageurl"),E=t("main_image"),G=t("gallery_images"),W=["MINIFIG","PART","SET","BOOK","GEAR","CATALOG","INSTRUCTION","UNSORTED_LOT","ORIGINAL_BOX"],Y=["Complete","Incomplete","Sealed"],Z=[{title:"New",value:"new"},{title:"Used",value:"used"}],F=g([]),P=g([]),h=async()=>{const s=await b.get("/api/generate-ean");V.value.value=s.data},ee=Q(async s=>{var l;try{k.value=!0;const r=new FormData;for(const m in s)m==="gallery_images"?(l=s.gallery_images)==null||l.forEach((v,c)=>r.append(`gallery_images[${c}]`,v)):m==="category_ids"?s.category_ids.forEach((v,c)=>r.append(`category_ids[${c}]`,v)):r.append(m,s[m]);const d=await b.post("/api/product",r,{headers:{"Content-Type":"multipart/form-data"}});f.value=d.data.message||"Product successfully added!",y.value="success",p.value=!0}catch(r){f.value=res.data.message||"Failed to add product.",y.value="error",p.value=!0,console.error("Error during submit:",r)}finally{k.value=!1}});return ie(async()=>{F.value=(await b.get("/api/categorylist")).data,P.value=(await b.get("/api/colors")).data}),(s,l)=>{const r=n("v-text-field"),d=n("v-select"),m=n("v-autocomplete"),v=n("v-btn"),c=n("v-switch"),j=n("v-file-input"),le=n("v-form"),ae=n("v-card-text"),oe=n("v-card"),te=n("v-progress-circular"),se=n("v-overlay"),re=n("v-snackbar"),ne=n("v-container");return q(),B(ne,{fluid:""},{default:i(()=>[o(oe,{class:"card z-index-2 h-100"},{default:i(()=>[o(ae,{class:"card-body p-3"},{default:i(()=>[o(le,{onSubmit:me(e(ee),["prevent"])},{default:i(()=>[o(r,{modelValue:e(I).value.value,"onUpdate:modelValue":l[0]||(l[0]=a=>e(I).value.value=a),label:"Titel",variant:"outlined","error-messages":e(I).errorMessage.value},null,8,["modelValue","error-messages"]),o(r,{modelValue:e(U).value.value,"onUpdate:modelValue":l[1]||(l[1]=a=>e(U).value.value=a),label:"Item No",variant:"outlined","error-messages":e(U).errorMessage.value},null,8,["modelValue","error-messages"]),o(d,{modelValue:e(_).value.value,"onUpdate:modelValue":l[2]||(l[2]=a=>e(_).value.value=a),items:W,label:"Item Type",variant:"outlined","error-messages":e(_).errorMessage.value},null,8,["modelValue","error-messages"]),o(m,{modelValue:e(S).value.value,"onUpdate:modelValue":l[3]||(l[3]=a=>e(S).value.value=a),items:P.value,"item-title":"bricklink_name","item-value":"bricklink_id",label:"Color",variant:"outlined","error-messages":e(S).errorMessage.value},null,8,["modelValue","items","error-messages"]),o(r,{modelValue:e(T).value.value,"onUpdate:modelValue":l[4]||(l[4]=a=>e(T).value.value=a),label:"Stock",variant:"outlined","error-messages":e(T).errorMessage.value},null,8,["modelValue","error-messages"]),o(r,{modelValue:e(N).value.value,"onUpdate:modelValue":l[5]||(l[5]=a=>e(N).value.value=a),label:"Prijs",variant:"outlined","error-messages":e(N).errorMessage.value},null,8,["modelValue","error-messages"]),o(d,{modelValue:e(O).value.value,"onUpdate:modelValue":l[6]||(l[6]=a=>e(O).value.value=a),items:Z,label:"Condition",variant:"outlined","error-messages":e(O).errorMessage.value},null,8,["modelValue","error-messages"]),e(_).value.value==="SET"?(q(),B(d,{key:0,modelValue:e(w).value.value,"onUpdate:modelValue":l[7]||(l[7]=a=>e(w).value.value=a),items:Y,label:"Completeness",variant:"outlined","error-messages":e(w).errorMessage.value},null,8,["modelValue","error-messages"])):K("",!0),o(m,{modelValue:e(M).value.value,"onUpdate:modelValue":l[8]||(l[8]=a=>e(M).value.value=a),items:F.value,"item-value":"id","item-title":"title",label:"CategorieÃ«n",multiple:"",chips:"",variant:"outlined","error-messages":e(M).errorMessage.value},null,8,["modelValue","items","error-messages"]),o(r,{modelValue:e(V).value.value,"onUpdate:modelValue":l[9]||(l[9]=a=>e(V).value.value=a),label:"EAN code",variant:"outlined","error-messages":e(V).errorMessage.value},{"append-inner":i(()=>[o(v,{onClick:h},{default:i(()=>l[18]||(l[18]=[$("Genereer")])),_:1,__:[18]})]),_:1},8,["modelValue","error-messages"]),o(r,{modelValue:e(C).value.value,"onUpdate:modelValue":l[10]||(l[10]=a=>e(C).value.value=a),label:"SKU",variant:"outlined","error-messages":e(C).errorMessage.value},null,8,["modelValue","error-messages"]),o(c,{modelValue:e(D).value.value,"onUpdate:modelValue":l[11]||(l[11]=a=>e(D).value.value=a),label:"Retain",variant:"outlined",color:"success"},null,8,["modelValue"]),o(c,{modelValue:e(R).value.value,"onUpdate:modelValue":l[12]||(l[12]=a=>e(R).value.value=a),label:"Is Stock Room",variant:"outlined",color:"success"},null,8,["modelValue"]),e(R).value.value?(q(),B(d,{key:1,modelValue:e(x).value.value,"onUpdate:modelValue":l[13]||(l[13]=a=>e(x).value.value=a),items:["A","B","C"],label:"Stock Room ID",variant:"outlined","error-messages":e(x).errorMessage.value},null,8,["modelValue","error-messages"])):K("",!0),o(r,{modelValue:e(A).value.value,"onUpdate:modelValue":l[14]||(l[14]=a=>e(A).value.value=a),label:"Afbeelding URL",variant:"outlined","error-messages":e(A).errorMessage.value},null,8,["modelValue","error-messages"]),o(j,{modelValue:e(E).value.value,"onUpdate:modelValue":l[15]||(l[15]=a=>e(E).value.value=a),label:"Main Image",variant:"outlined","error-messages":e(E).errorMessage.value},null,8,["modelValue","error-messages"]),o(j,{modelValue:e(G).value.value,"onUpdate:modelValue":l[16]||(l[16]=a=>e(G).value.value=a),label:"Gallery Images",multiple:"",variant:"outlined","error-messages":e(G).errorMessage.value},null,8,["modelValue","error-messages"]),o(v,{type:"submit",class:"btn-primary"},{default:i(()=>l[19]||(l[19]=[$("Opslaan")])),_:1,__:[19]})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),o(se,{"model-value":k.value,persistent:"",class:"d-flex align-center justify-center"},{default:i(()=>[o(te,{size:"64",indeterminate:"",color:"primary"})]),_:1},8,["model-value"]),o(re,{modelValue:p.value,"onUpdate:modelValue":l[17]||(l[17]=a=>p.value=a),color:y.value,timeout:"3000",location:"top right"},{default:i(()=>[$(de(f.value),1)]),_:1},8,["modelValue","color"])]),_:1})}}},be=ue(ge,[["__scopeId","data-v-99c09f77"],["__file","InventoryNew.vue"]]);export{be as default};
