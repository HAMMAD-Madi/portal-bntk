import{_ as W,r as o,i as l,o as z,j as A,k as a,m as V,l as n,a as d,e as m,t as c}from"./app-be4f7d6f.js";import{D as F}from"./datetime-9905d492.js";const H=["onClick"],L={__name:"InvoiceIndex",setup(T){const u=o([]),B=o(null),p=o(0),r=o(!1),i=o(null),f=o(!0),g=o(20),C=o([{title:"Factuur nr.",key:"invoice_number"},{title:"Klantnaam",key:"contact.firstname"},{title:"Aangemaakt op",key:"created_at"},{title:"Acties",key:""}]),k=async({page:s,itemsPerPage:e,sortBy:v})=>{f.value=!0;const _=await V.get("/api/invoices",{params:{page:s}});u.value=_.data.data,p.value=_.data.total,f.value=!1},j=async s=>{i.value=s,r.value==!1&&(r.value=!0)},D=async()=>{if((await V.delete("/api/invoices/"+i.value)).data.status=="deleted"){console.log(i.value);const e=u.value.filter(v=>v.id!==i.value);console.log(e),u.value=e}i.value=null};k({page:1,itemsPerPage:20,sortBy:!1});const $=s=>F.fromISO(s).toFormat("dd-LL-yyyy 'om' HH:mm:ss");return(s,e)=>{const v=l("router-link"),_=l("v-data-table-server"),y=l("v-card-text"),x=l("v-btn"),N=l("v-card-actions"),I=l("v-card"),S=l("v-dialog"),U=l("v-container");return z(),A(U,{fluid:""},{default:a(()=>[n(I,{class:"card z-index-2 h-100"},{default:a(()=>[n(y,{class:"card-body p-3"},{default:a(()=>[n(_,{"items-per-page":g.value,"onUpdate:itemsPerPage":e[0]||(e[0]=t=>g.value=t),headers:C.value,"items-length":p.value,items:u.value,loading:f.value,search:B.value,class:"elevation-1","item-value":"title","onUpdate:options":k},{item:a(({item:t})=>{var b,w,P;return[d("tr",null,[d("td",null,[n(v,{to:`/facturen/${t.number}`},{default:a(()=>[m(c(t.number),1)]),_:2},1032,["to"])]),d("td",null,c(((b=t.contact)==null?void 0:b.firstname)??"")+" "+c(((w=t.contact)==null?void 0:w.affix)??"")+" "+c(((P=t.contact)==null?void 0:P.lastname)??""),1),d("td",null,c($(t.created_at)),1),d("td",{onClick:K=>j(t.id)},"Verwijderen",8,H)])]}),_:1},8,["items-per-page","headers","items-length","items","loading","search"]),n(S,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),width:"auto"},{default:a(()=>[n(I,null,{default:a(()=>[n(y,null,{default:a(()=>e[4]||(e[4]=[m(" Weet je zeker dat je de factuur van ... wilt verwijderen? ")])),_:1,__:[4]}),n(N,null,{default:a(()=>[n(x,{color:"red-darken-1",variant:"text",onClick:e[1]||(e[1]=t=>{r.value=!1,D()})},{default:a(()=>e[5]||(e[5]=[m("Bevestigen")])),_:1,__:[5]}),n(x,{color:"green-darken-1",variant:"text",onClick:e[2]||(e[2]=t=>{r.value=!1})},{default:a(()=>e[6]||(e[6]=[m("Sluiten")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},q=W(L,[["__file","InvoiceIndex.vue"]]);export{q as default};
