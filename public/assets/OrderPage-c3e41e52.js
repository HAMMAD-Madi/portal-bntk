import{_ as F,r as m,s as X,q as Q,o as _,c as g,a as d,d as U,u as ee,h as j,A as le,m as B,i as r,j as E,k as n,l,e as y,F as te,f as ae,t as V,n as C}from"./app-be4f7d6f.js";const ne=["disabled"],oe={key:0,class:"label-preview"},ie=["src"],ue=["disabled"],se={key:1,class:"error"},N="DYMO LabelWriter 4XL",re={__name:"DymoLabelPrinter",props:{labelXmlPath:{type:String,required:!0}},setup(I){const k=I,c=m(null),t=m(null),p=m(!1);function f(){p.value=!!window.dymo&&!!window.dymo.label&&!!window.dymo.label.framework}async function h(){try{const u=await fetch(k.labelXmlPath);if(!u.ok)throw new Error("Failed to load label XML");c.value=await u.text()}catch(u){console.error("Error loading label XML:",u)}}function w(){if(!(!p.value||!c.value))try{const u=dymo.label.framework.openLabelXml(c.value);if(!u.isValidLabel()){console.error("Invalid label format");return}const x=`<LabelRenderParams>
                                 <LabelType>1744907</LabelType>
                               </LabelRenderParams>`;t.value=u.render(x,N)}catch(u){console.error("Error rendering label preview:",u)}}function L(){if(!(!p.value||!t.value))try{dymo.label.framework.openLabelXml(c.value).print(N)}catch(u){console.error("Error printing label:",u)}}return X(()=>{f(),h()}),Q(()=>k.labelXmlPath,h),(u,x)=>(_(),g("div",null,[d("button",{onClick:w,disabled:!c.value||!p.value},"Render Label Preview",8,ne),t.value?(_(),g("div",oe,[d("img",{src:t.value,alt:"Label Preview"},null,8,ie)])):U("",!0),d("button",{onClick:L,disabled:!t.value||!p.value},"Print Label",8,ue),p.value?U("",!0):(_(),g("p",se,"DYMO SDK is not available. Please check your connection and try again."))]))}},de=F(re,[["__file","DymoLabelPrinter.vue"]]),ce=[{value:"NL",text:"Nederland"},{value:"BE",text:"België"},{value:"AT",text:"Oostenrijk"},{value:"BG",text:"Bulgarije"},{value:"HR",text:"Kroatië"},{value:"CY",text:"Cyprus"},{value:"CZ",text:"Tsjechië"},{value:"DK",text:"Denemarken"},{value:"EE",text:"Estland"},{value:"FI",text:"Finland"},{value:"FR",text:"Frankrijk"},{value:"DE",text:"Duitsland"},{value:"GR",text:"Griekenland"},{value:"HU",text:"Hongarije"},{value:"IE",text:"Ierland"},{value:"IT",text:"Italië"},{value:"LV",text:"Letland"},{value:"LT",text:"Litouwen"},{value:"LU",text:"Luxemburg"},{value:"MT",text:"Malta"},{value:"PL",text:"Polen"},{value:"PT",text:"Portugal"},{value:"RO",text:"Roemenië"},{value:"SK",text:"Slowakije"},{value:"SI",text:"Slovenië"},{value:"ES",text:"Spanje"},{value:"SE",text:"Zweden"},{value:"IS",text:"IJsland"},{value:"LI",text:"Liechtenstein"},{value:"NO",text:"Noorwegen"}];const pe={key:1},ve={class:"mt-10 product-container"},me=["onClick"],_e={class:"product-title"},fe={class:"product-details"},be={class:"total-price"},ge={class:"button-group"},xe={__name:"OrderPage",setup(I){const k=ee(),c=j(()=>k.params.order_id),t=m({contact:{shipping_company_name:"",shipping_firstname:"",shipping_lastname:"",shipping_street_name:"",shipping_house_number:"",shipping_house_number_extension:"",shipping_postalcode:"",shipping_city:"",shipping_country:""},order_id:"",products:[]}),p=m(!1);j(()=>JSON.stringify(f.value));const f=m([]);function h(s){f.value.includes(s)?f.value=f.value.filter(e=>e!==s):f.value.push(s)}const w=s=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s),L=()=>{if(t.value.order_id){const s=t.value.products.reduce((e,b)=>e+b.price*b.quantity,0);return w(s)}},u=m(ce),x=le({});X(()=>{R()});const R=async()=>{const s=await B.get("/api/orders/"+c.value);t.value=s.data||{},t.value&&t.value.products.forEach(e=>{x[e.ean]||(x[e.ean]={method:""})})},D=m(null),S=m(null);function T(s){D.value=s}const $=()=>{console.log("Downloading invoice...")},M=async()=>{const s=await B.post("/api/shippinglabel",{order:t.value});if(s.data.pdf.length>0){const b=`data:application/pdf;base64,${s.data.pdf}`,o=document.createElement("a"),i="verzendlabel_"+t.value.contact.shipping_firstname.replace(/ /g,"_")+"_"+t.value.contact.shipping_lastname.replace(/ /g,"_")+"_"+c.value+".pdf";o.href=b,o.download=i,o.click()}};return(s,e)=>{const b=r("v-empty-state"),o=r("v-text-field"),i=r("v-col"),v=r("v-row"),A=r("v-select"),z=r("v-expansion-panel-title"),q=r("v-expansion-panel-text"),H=r("v-expansion-panel"),K=r("v-expansion-panels"),P=r("v-btn"),G=r("v-checkbox"),Y=r("v-divider"),O=r("v-container"),J=r("v-card-text"),Z=r("v-card");return _(),E(O,{"max-width":"800",style:{"padding-bottom":"100px !important"}},{default:n(()=>[l(Z,{class:"card z-index-2 h-100"},{default:n(()=>[l(J,{class:"card-body p-3"},{default:n(()=>[t.value.hasOwnProperty("order_id")?(_(),g("div",pe,[l(v,null,{default:n(()=>[l(i,{cols:"12"},{default:n(()=>[l(o,{label:"Bedrijfsnaam",modelValue:t.value.contact.shipping_company_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.contact.shipping_company_name=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:n(()=>[l(i,{cols:"4"},{default:n(()=>[l(o,{label:"Voornaam",modelValue:t.value.contact.shipping_firstname,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.contact.shipping_firstname=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"8"},{default:n(()=>[l(o,{label:"Achternaam",modelValue:t.value.contact.shipping_lastname,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.contact.shipping_lastname=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:n(()=>[l(i,{cols:"6"},{default:n(()=>[l(o,{label:"Straatnaam",modelValue:t.value.contact.shipping_street_name,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.contact.shipping_street_name=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"2"},{default:n(()=>[l(o,{label:"Huisnummer",modelValue:t.value.contact.shipping_house_number,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.contact.shipping_house_number=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,null,{default:n(()=>[l(o,{label:"Toevoeging",modelValue:t.value.contact.shipping_house_number_extension,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.contact.shipping_house_number_extension=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:n(()=>[l(i,{cols:"2"},{default:n(()=>[l(o,{label:"Postcode",modelValue:t.value.contact.shipping_postalcode,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.contact.shipping_postalcode=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"4"},{default:n(()=>[l(o,{label:"Plaatsnaam",modelValue:t.value.contact.shipping_city,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.contact.shipping_city=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"4"},{default:n(()=>[l(A,{"item-title":"text","item-value":"value",items:u.value,label:"Land",modelValue:t.value.contact.shipping_country,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.contact.shipping_country=a),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),l(v,null,{default:n(()=>[l(i,{cols:"6"},{default:n(()=>[l(o,{label:"E-mail",modelValue:t.value.contact.email,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.contact.email=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"3"},{default:n(()=>[l(o,{label:"Telefoon",modelValue:t.value.contact.phone,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.contact.phone=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"3"},{default:n(()=>[l(o,{label:"Mobiel",modelValue:t.value.contact.mobile,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.contact.mobile=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(K,{class:"mt-6",elevation:"0",style:{border:"1px solid #777"}},{default:n(()=>[l(H,{elevation:"0"},{default:n(()=>[l(z,null,{default:n(()=>e[19]||(e[19]=[y(" Meer adresgegevens ")])),_:1,__:[19]}),l(q,null,{default:n(()=>[l(v,null,{default:n(()=>[l(i,{cols:"4"},{default:n(()=>[l(o,{label:"Regio",modelValue:t.value.contact.shipping_region,"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.contact.shipping_region=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"4"},{default:n(()=>[l(o,{label:"Afdeling",modelValue:t.value.contact.shipping_department,"onUpdate:modelValue":e[13]||(e[13]=a=>t.value.contact.shipping_department=a),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(i,{cols:"4"},{default:n(()=>[l(o,{label:"Verdieping",modelValue:t.value.contact.shipping_floor,"onUpdate:modelValue":e[14]||(e[14]=a=>t.value.contact.shipping_floor=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),d("div",ve,[(_(!0),g(te,null,ae(t.value.products,(a,W)=>(_(),g("div",{key:W,class:C(["product-row",{selected:f.value.includes(a.orderItemId)}]),onClick:ye=>h(a.orderItemId)},[d("div",_e,V(a.title),1),d("div",fe,[d("span",null,"Aantal: "+V(a.quantity),1),d("span",null,"EAN: "+V(a.ean),1),d("span",null,"Prijs: "+V(w(a.price)),1)])],10,me))),128))]),d("div",be,"Totaal: "+V(L()),1),l(O,{class:"shipping-preference-box"},{default:n(()=>[l(v,null,{default:n(()=>[l(i,null,{default:n(()=>[d("div",ge,[l(P,{class:C({active:D.value==="Brievenbuspakje"}),onClick:e[15]||(e[15]=a=>T("Brievenbuspakje")),variant:"flat"},{default:n(()=>e[20]||(e[20]=[y(" Brievenbuspakje ")])),_:1,__:[20]},8,["class"]),l(P,{class:C({active:D.value==="Pakket"}),onClick:e[16]||(e[16]=a=>T("Pakket")),variant:"flat"},{default:n(()=>e[21]||(e[21]=[y(" Pakket ")])),_:1,__:[21]},8,["class"])]),D.value==="Pakket"?(_(),E(o,{key:0,label:"Verzekerd versturen",variant:"outlined",modelValue:S.value,"onUpdate:modelValue":e[17]||(e[17]=a=>S.value=a),prefix:"€",class:"mt-5"},null,8,["modelValue"])):U("",!0)]),_:1})]),_:1}),l(v,null,{default:n(()=>[l(i,null,{default:n(()=>[l(G,{modelValue:p.value,"onUpdate:modelValue":e[18]||(e[18]=a=>p.value=a),label:"Track & Trace code toevoegen in Bol.com"},null,8,["modelValue"])]),_:1})]),_:1}),l(Y),l(v,{class:"actions",justify:"start"},{default:n(()=>[l(P,{onClick:$,class:"btn-primary action-btn"},{default:n(()=>e[22]||(e[22]=[y("Factuur downloaden")])),_:1,__:[22]}),l(P,{onClick:M,class:"btn-primary action-btn"},{default:n(()=>e[23]||(e[23]=[y("Verzendlabel maken")])),_:1,__:[23]})]),_:1})]),_:1}),d("div",null,[l(de,{labelXmlPath:"https://portal.bntk.eu/labelTemplate.xml"})])])):(_(),E(b,{key:0,headline:"Oops, 404",title:"Order niet gevonden",text:`De order met ordernummer '${c.value}' kon niet gevonden worden`,image:"data:image/svg+xml,%3Csvg%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%220%200%2064%2064%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Ccircle%20cx%3D%2226%22%20cy%3D%2226%22%20r%3D%2216%22%20stroke%3D%22%23555%22%20stroke-width%3D%224%22%20fill%3D%22%23F3F4F6%22/%3E%3Cline%20x1%3D%2236%22%20y1%3D%2236%22%20x2%3D%2254%22%20y2%3D%2254%22%20stroke%3D%22%23555%22%20stroke-width%3D%224%22%20stroke-linecap%3D%22round%22/%3E%3Cpath%20d%3D%22M26%2020c1.9%200%203.4%201.5%203.4%203.4%200%201.4-0.9%202.5-2.3%202.8-0.8%200.3-1.1%201.2-1.1%202.1v1h-2v-1c0-1.6%200.8-3.1%202.3-3.6%200.6-0.2%201.1-0.7%201.1-1.3%200-0.9-0.7-1.6-1.6-1.6s-1.6%200.7-1.6%201.6h-2c0-1.9%201.5-3.4%203.4-3.4z%22%20fill%3D%22%23555%22/%3E%3Ccircle%20cx%3D%2226%22%20cy%3D%2232%22%20r%3D%221%22%20fill%3D%22%23555%22/%3E%3C/svg%3E"},null,8,["text"]))]),_:1})]),_:1})]),_:1})}}},ke=F(xe,[["__scopeId","data-v-f520b26f"],["__file","OrderPage.vue"]]);export{ke as default};
